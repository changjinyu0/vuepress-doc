(window.webpackJsonp=window.webpackJsonp||[]).push([[333],{702:function(s,t,a){"use strict";a.r(t);var n=a(45),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"rollup的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rollup的基本使用"}},[s._v("#")]),s._v(" Rollup的基本使用")]),s._v(" "),a("p",[a("code",[s._v("rollup.js")]),s._v("是一个模块打包工具，可以使项目从一个入口文件开始，将所有使用到的模块文件都打包到一个最终的发布文件中，"),a("code",[s._v("Rollup")]),s._v("极其适合构建一个工具库，"),a("code",[s._v("Vue.js")]),s._v("源码就是通过"),a("code",[s._v("Rollup")]),s._v("打包构建的。")]),s._v(" "),a("h2",{attrs:{id:"描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[s._v("#")]),s._v(" 描述")]),s._v(" "),a("p",[a("code",[s._v("rollup")]),s._v("对代码模块使用新的标准化格式，这些标准都包含在"),a("code",[s._v("JavaScript")]),s._v("的"),a("code",[s._v("ES6")]),s._v("版本中，而不是以前的特殊解决方案，如"),a("code",[s._v("CommonJS")]),s._v("和"),a("code",[s._v("AMD")]),s._v("等，也就是说"),a("code",[s._v("rollup")]),s._v("使用"),a("code",[s._v("ES6")]),s._v("的模块标准，这意味着我们可以直接使用"),a("code",[s._v("import")]),s._v("和"),a("code",[s._v("export")]),s._v("而不需要引入"),a("code",[s._v("babel")]),s._v("，当然，在现在的项目中，"),a("code",[s._v("babel")]),s._v("可以说是必用的工具，此外"),a("code",[s._v("rollup")]),s._v("实现了另一个重要特性叫做"),a("code",[s._v("tree-shaking")]),s._v("，这个特性可以帮助你将无用代码，即没有使用到的代码自动去掉，这个特性是基于"),a("code",[s._v("ES6")]),s._v("模块的静态分析的，也就是说，只有"),a("code",[s._v("export")]),s._v("而没有"),a("code",[s._v("import")]),s._v("的变量是不会被打包到最终代码中的。")]),s._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("p",[s._v("我的一个小油猴插件就是通过"),a("code",[s._v("rollup")]),s._v("打包的，"),a("code",[s._v("GreasyFork")]),s._v("地址为"),a("code",[s._v("https://greasyfork.org/zh-CN/scripts/405130")]),s._v("，全部源码地址为"),a("code",[s._v("https://github.com/WindrunnerMax/TKScript")]),s._v("，使用"),a("code",[s._v("npm run build")]),s._v("即可打包构建，"),a("code",[s._v("package.json")]),s._v("文件与"),a("code",[s._v("rollup.config.js")]),s._v("文件配置如下。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "name": "TKScript",\n  "version": "1.0.0",\n  "description": "Tampermonkey",\n  "scripts": {\n    "build": "rollup -c"\n  },\n  "author": "Czy",\n  "license": "MIT",\n  "devDependencies": {\n    "@babel/core": "^7.10.4",\n    "@babel/preset-env": "^7.10.4",\n    "install": "^0.13.0",\n    "npm": "^6.14.5",\n    "rollup": "^2.18.2",\n    "rollup-plugin-babel": "^4.4.0",\n    "rollup-plugin-postcss": "^3.1.2",\n    "rollup-plugin-uglify": "^6.0.4",\n    "rollup-plugin-userscript-metablock": "^0.2.5"\n  }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('import postcss from "rollup-plugin-postcss";\nimport babel from "rollup-plugin-babel";\n// import { uglify } from "rollup-plugin-uglify";\nimport metablock from "rollup-plugin-userscript-metablock";\n\nconst config = {\n    postcss: {\n        minimize: true,\n        extensions: [".css"],\n    },\n    babel: {\n        exclude: ["node_modules/**"],\n        presets: [\n            [\n                "@babel/env", {\n                    modules: false,\n                    targets: "last 2 versions, ie >= 10"\n                }\n            ]\n        ]\n    },\n\n}\n\nexport default [{\n    input: "./src/copy/src/index.js",\n    output: {\n        file: "./dist/copy.js",\n        format: "iife",\n        name: "copyModule"\n    },\n    plugins: [\n        postcss(config.postcss),\n        babel(config.babel),\n        // uglify(),\n        metablock({\n            file: "./src/copy/meta.json"\n        })\n    ]\n},{\n    input: "./src/site-director/src/index.js",\n    output: {\n        file: "./dist/site-director.js",\n        format: "iife",\n        name: "linkModule"\n    },\n    plugins: [\n        postcss(config.postcss),\n        babel(config.babel),\n        // uglify(),\n        metablock({\n            file: "./src/site-director/meta.json"\n        })\n    ]\n}];\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br")])]),a("h2",{attrs:{id:"使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[s._v("#")]),s._v(" 使用方法")]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("ul",[a("li",[s._v("全局安装: "),a("code",[s._v("npm install rollup -g")]),s._v("。")]),s._v(" "),a("li",[s._v("项目安装: "),a("code",[s._v("npm install rollup --save-dev")]),s._v("、"),a("code",[s._v("yarn add rollup -D")]),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"命令行工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行工具"}},[s._v("#")]),s._v(" 命令行工具")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-i, --input <filename>")]),s._v(": 要打包的文件(必须)。")]),s._v(" "),a("li",[a("code",[s._v("-o, --file <output>")]),s._v(": 输出的文件(如果没有这个参数，则直接输出到控制台)。")]),s._v(" "),a("li",[a("code",[s._v("-f, --format <format>")]),s._v(": 输出的文件类型。\n"),a("ul",[a("li",[a("code",[s._v("amd")]),s._v(": 异步模块定义，用于像"),a("code",[s._v("RequestJS")]),s._v("这样的模块加载器。")]),s._v(" "),a("li",[a("code",[s._v("cjs")]),s._v(": "),a("code",[s._v("CommonJS,")]),s._v("适用于"),a("code",[s._v("Node")]),s._v("或"),a("code",[s._v("Browserify/webpack")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("es")]),s._v(": 将软件包保存为"),a("code",[s._v("ES")]),s._v("模块文件。")]),s._v(" "),a("li",[a("code",[s._v("iife")]),s._v(": 一个自动执行的功能，适合作为"),a("code",[s._v("script")]),s._v("标签这样的，只能在浏览器中运行。")]),s._v(" "),a("li",[a("code",[s._v("umd")]),s._v(": 通用模块定义，以"),a("code",[s._v("amd")]),s._v("、"),a("code",[s._v("cjs")]),s._v("和"),a("code",[s._v("iife")]),s._v("为一体。")]),s._v(" "),a("li",[a("code",[s._v("system")]),s._v(": "),a("code",[s._v("SystemJS")]),s._v("加载器格式。")])])]),s._v(" "),a("li",[a("code",[s._v("-e, --external <ids>")]),s._v(": 将模块"),a("code",[s._v("ID")]),s._v("的逗号分隔列表排除。")]),s._v(" "),a("li",[a("code",[s._v("-g, --globals <pairs>")]),s._v(": 以"),a("code",[s._v("moduleID:Global")]),s._v("键值对的形式，用逗号分隔开任何定义在这里模块"),a("code",[s._v("ID")]),s._v("定义添加到外部依赖。")]),s._v(" "),a("li",[a("code",[s._v("-n, --name <name>")]),s._v(": 生成"),a("code",[s._v("UMD")]),s._v("模块的名字。")]),s._v(" "),a("li",[a("code",[s._v("-m, --sourcemap")]),s._v(": 生成"),a("code",[s._v("sourcemap")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("--amd.id")]),s._v(": "),a("code",[s._v("AMD")]),s._v("模块的"),a("code",[s._v("ID")]),s._v("，默认是个匿名函数。")]),s._v(" "),a("li",[a("code",[s._v("--amd.define")]),s._v(": 使用"),a("code",[s._v("Function")]),s._v("来代替"),a("code",[s._v("define")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("--no-strict")]),s._v(": 在生成的包中省略"),a("code",[s._v("use strict;")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("--no-conflict")]),s._v(": 对于"),a("code",[s._v("UMD")]),s._v("模块来说，给全局变量生成一个无冲突的方法。")]),s._v(" "),a("li",[a("code",[s._v("--intro")]),s._v(": 在打包好的文件的块的内部("),a("code",[s._v("wrapper")]),s._v("内部)的最顶部插入一段内容。")]),s._v(" "),a("li",[a("code",[s._v("--outro")]),s._v(": 在打包好的文件的块的内部("),a("code",[s._v("wrapper")]),s._v("内部)的最底部插入一段内容。")]),s._v(" "),a("li",[a("code",[s._v("--banner")]),s._v(": 在打包好的文件的块的外部("),a("code",[s._v("wrapper")]),s._v("外部)的最顶部插入一段内容。")]),s._v(" "),a("li",[a("code",[s._v("--footer")]),s._v(": 在打包好的文件的块的外部("),a("code",[s._v("wrapper")]),s._v("外部)的最底部插入一段内容。")]),s._v(" "),a("li",[a("code",[s._v("--interop")]),s._v(": 包含公共的模块(这个选项是默认添加的)。")]),s._v(" "),a("li",[a("code",[s._v("-w, --watch")]),s._v(": 监听源文件是否有改动，如果有改动，重新打包。")]),s._v(" "),a("li",[a("code",[s._v("--silent")]),s._v(": 不要将警告打印到控制台。")]),s._v(" "),a("li",[a("code",[s._v("-h, --help")]),s._v(": 输出帮助信息。")]),s._v(" "),a("li",[a("code",[s._v("-v, --version")]),s._v(" 输出版本信息。")])]),s._v(" "),a("h3",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// rollup.config.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心选项")]),s._v("\n  input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须")]),s._v("\n  external"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 额外选项")]),s._v("\n  onwarn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// danger zone")]),s._v("\n  acorn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  moduleContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  legacy\n\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须 (如果要输出多个，可以是一个数组)")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 核心选项")]),s._v("\n    file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须")]),s._v("\n    format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 必须")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    globals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 额外选项")]),s._v("\n    paths"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    banner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    footer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    intro"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    outro"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    sourcemap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    sourcemapFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    interop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 高危选项")]),s._v("\n    exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    amd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    indent\n    strict\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br")])]),a("h3",{attrs:{id:"input"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input"}},[s._v("#")]),s._v(" input")]),s._v(" "),a("p",[a("code",[s._v("input")]),s._v("、"),a("code",[s._v("rollup -i,--input")]),s._v("，打包入口文件路径，参数类型为"),a("code",[s._v("String | String [] | { [entryName: string]: string }")]),s._v("。"),a("br"),s._v("\n使用数组或者字符串作为选项值的时候的时候，默认使用的是文件的原始名称，作为文件的"),a("code",[s._v("basename")]),s._v("，可以在"),a("code",[s._v("output:entryFileNames = entry-[name].js")]),s._v("配置选项作为"),a("code",[s._v("[name]")]),s._v("动态参数传递进去。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("input"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ninput"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./other/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用键值对"),a("code",[s._v("{key: value}")]),s._v("的选项值作为参数，使用的对象的键作为文件的"),a("code",[s._v("basename")]),s._v("，用来在"),a("code",[s._v("output:entryFileNames")]),s._v("配置选项作为"),a("code",[s._v("[name]")]),s._v("动态参数传递进去。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("input"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" vendor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./other/index.js"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"external"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#external"}},[s._v("#")]),s._v(" external")]),s._v(" "),a("p",[a("code",[s._v("external")]),s._v("、"),a("code",[s._v("rollup -e,--external")]),s._v("， 维持包文件指定"),a("code",[s._v("id")]),s._v("文件维持外链，不参与打包构建 参数类型为"),a("code",[s._v("String[] | (id: string, parentId: string, isResolved: boolean) => boolean")]),s._v("。")]),s._v(" "),a("ul",[a("li",[s._v("当"),a("code",[s._v("format")]),s._v("类型为"),a("code",[s._v("iife")]),s._v("或者"),a("code",[s._v("umd")]),s._v("格式的时候需要配置"),a("code",[s._v("output.globals")]),s._v("选项参数以提供全局变量名来替换外部导入。")]),s._v(" "),a("li",[s._v("当"),a("code",[s._v("external")]),s._v("是一个函数的时候，各个参数代表的含义分别是: "),a("code",[s._v("id")]),s._v("，所有导入的文件"),a("code",[s._v("id")]),s._v("，即"),a("code",[s._v("import")]),s._v("访问的路径；"),a("code",[s._v("parent")]),s._v("，"),a("code",[s._v("import")]),s._v("所在的文件绝对路径；"),a("code",[s._v("isResolved")]),s._v("，表示文件"),a("code",[s._v("id")]),s._v("是否已通过插件处理过。")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  external"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'some-externally-required-library'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'another-externally-required-library'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// or ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("external")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isResolved")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" plugins")]),s._v(" "),a("p",[s._v("可以提供"),a("code",[s._v("rollup")]),s._v("很多插件选项，参数类型为"),a("code",[s._v("Plugin | (Plugin | void)[]")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("commonjs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("， \n      isProduction "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rollup-plugin-terser"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("terser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"onwarn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onwarn"}},[s._v("#")]),s._v(" onwarn")]),s._v(" "),a("p",[s._v("拦截警告信息，如果没有提供，警告将被复制并打印到控制台，警告是至少有一个"),a("code",[s._v("code")]),s._v("和"),a("code",[s._v("message")]),s._v("属性的对象，我们可以控制如何处理不同类型的警告。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onwarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("warning")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 跳过某些警告")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'UNUSED_EXTERNAL_IMPORT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 抛出异常")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NON_EXISTENT_EXPORT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 控制台打印一切警告")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("许多警告也有一个"),a("code",[s._v("loc")]),s._v("属性和一个"),a("code",[s._v("frame")]),s._v("，可以定位到警告的来源。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("onwarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" loc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印位置（如果适用）")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("loc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v(" (")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("loc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("line"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("loc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v(") ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"acorn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acorn"}},[s._v("#")]),s._v(" acorn")]),s._v(" "),a("p",[s._v("这是"),a("code",[s._v("danger zone")]),s._v("，修改"),a("code",[s._v("rollup")]),s._v("解析"),a("code",[s._v("js")]),s._v("配置，"),a("code",[s._v("rollup")]),s._v("内部使用的"),a("code",[s._v("acorn")]),s._v("库解析"),a("code",[s._v("js, acorn")]),s._v("库提供了解析"),a("code",[s._v("js")]),s._v("的相关配置"),a("code",[s._v("api")]),s._v("，一般很少需要修改。在下面这个例子中，这个"),a("code",[s._v("acorn-jsx")]),s._v("插件和使用"),a("code",[s._v("babel")]),s._v("并不是同一个意思，这个插件的左右是让"),a("code",[s._v("acornjs")]),s._v("解析器能认识"),a("code",[s._v("jsx")]),s._v("语法，经过"),a("code",[s._v("rollup")]),s._v("打包后展示的还是"),a("code",[s._v("jsx")]),s._v("语法，而"),a("code",[s._v("babel")]),s._v("会直接修改"),a("code",[s._v("jsx")]),s._v("结构成为普通"),a("code",[s._v("js")]),s._v("语法。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" jsx "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"acorn-jsx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  acornInjectPlugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("jsx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[s._v("#")]),s._v(" context")]),s._v(" "),a("p",[s._v("默认情况下，模块的上下文，即顶级的"),a("code",[s._v("this")]),s._v("的值为"),a("code",[s._v("undefined")]),s._v("，在极少数情况下，可能需要将其更改为其他内容，例如"),a("code",[s._v("window")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"modulecontext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modulecontext"}},[s._v("#")]),s._v(" moduleContext")]),s._v(" "),a("p",[s._v("和"),a("code",[s._v("context")]),s._v("一样，但是每个模块可以是"),a("code",[s._v("id:context")]),s._v("对的对象，也可以是"),a("code",[s._v("id=>context")]),s._v("函数。")]),s._v(" "),a("h3",{attrs:{id:"legacy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#legacy"}},[s._v("#")]),s._v(" legacy")]),s._v(" "),a("p",[s._v("为了增加对诸如"),a("code",[s._v("IE8")]),s._v("之类的旧版环境的支持，通过剥离更多可能无法正常工作的现代化的代码，其代价是偏离"),a("code",[s._v("ES6")]),s._v("模块环境所需的精确规范。")]),s._v(" "),a("h3",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[s._v("#")]),s._v(" output")]),s._v(" "),a("p",[a("code",[s._v("output")]),s._v("是输出文件的统一配置入口, 包含很多可配置选项 参数类型为"),a("code",[s._v("Object | Array")]),s._v("，单个输出为一个对象，要输出多个，可以是一个数组。")]),s._v(" "),a("h3",{attrs:{id:"output-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-file"}},[s._v("#")]),s._v(" output.file")]),s._v(" "),a("p",[a("code",[s._v("output.file")]),s._v("、"),a("code",[s._v("rollup -o,--file")]),s._v("，必填，对于单个文件打包可以使用该选项指定打包内容写入带路径的文件，参数类型为"),a("code",[s._v("String")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./dist/index.js"')]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"output-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-format"}},[s._v("#")]),s._v(" output.format")]),s._v(" "),a("p",[a("code",[s._v("output.format")]),s._v("、"),a("code",[s._v("rollup -f,--format")]),s._v("，必填，打包格式类型 ，配置可选项有"),a("code",[s._v("amd")]),s._v("、"),a("code",[s._v("cjs")]),s._v("、"),a("code",[s._v("es")]),s._v("、"),a("code",[s._v("iife")]),s._v("、"),a("code",[s._v("umd")]),s._v("、"),a("code",[s._v("system")]),s._v("，选项说明同命令行配置选项，参数类型为"),a("code",[s._v("String")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    format"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"iife"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"output-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-name"}},[s._v("#")]),s._v(" output.name")]),s._v(" "),a("p",[a("code",[s._v("output.format")]),s._v("，"),a("code",[s._v("rollup -f,--format")]),s._v("生成包名称，参数类型为"),a("code",[s._v("String")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bundle"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-globals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-globals"}},[s._v("#")]),s._v(" output.globals")]),s._v(" "),a("p",[a("code",[s._v("output.globals")]),s._v("，"),a("code",[s._v("rollup -g,--globals")]),s._v("，配合配置"),a("code",[s._v("external")]),s._v("选项指定的外链在"),a("code",[s._v("umd")]),s._v("和"),a("code",[s._v("iife")]),s._v("文件类型下提供的全局访问变量名参数类型，参数类型为"),a("code",[s._v("{ [id: String]: String } | ((id: String) => String)")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  globals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    jquery"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-paths"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-paths"}},[s._v("#")]),s._v(" output.paths")]),s._v(" "),a("p",[s._v("它获取一个"),a("code",[s._v("ID")]),s._v("并返回一个路径，或者"),a("code",[s._v("id: path")]),s._v("对的"),a("code",[s._v("Object")]),s._v("，在提供的位置，这些路径将被用于生成的包而不是模块"),a("code",[s._v("ID")]),s._v("，从而允许从"),a("code",[s._v("CDN")]),s._v("加载依赖关系。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" selectAll "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'d3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("selectAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'p'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'color'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'purple'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// rollup.config.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  input"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'app.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  external"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'d3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    format"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'amd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      d3"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://d3js.org/d3.v4.min'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// bundle.js")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://d3js.org/d3.v4.min'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("d3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n  d3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("selectAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'p'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'color'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'purple'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"output-banner"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-banner"}},[s._v("#")]),s._v(" output.banner")]),s._v(" "),a("p",[s._v("字符串前置到文件束"),a("code",[s._v("bundle")]),s._v("，"),a("code",[s._v("banner")]),s._v("选项不会破坏"),a("code",[s._v("sourcemaps")]),s._v("，参数类型为"),a("code",[s._v("String")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      banner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/* library version "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" */"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-footer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-footer"}},[s._v("#")]),s._v(" output.footer")]),s._v(" "),a("p",[s._v("字符串前置到文件束"),a("code",[s._v("bundle")]),s._v("，"),a("code",[s._v("footer")]),s._v("选项不会破坏"),a("code",[s._v("sourcemaps")]),s._v("，参数类型为"),a("code",[s._v("String")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      footer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/* follow me on Github! */"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-intro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-intro"}},[s._v("#")]),s._v(" output.intro")]),s._v(" "),a("p",[s._v("类似于"),a("code",[s._v("output.banner")]),s._v("，如果说"),a("code",[s._v("banner")]),s._v("和"),a("code",[s._v("footer")]),s._v("是在文件开始和结尾添加字符串，那么"),a("code",[s._v("intro")]),s._v("和"),a("code",[s._v("outro")]),s._v("就是在被打包的代码开头和结尾添加字符串了。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      intro"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/* library version "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" version "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" */"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-outro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-outro"}},[s._v("#")]),s._v(" output.outro")]),s._v(" "),a("p",[s._v("类似于"),a("code",[s._v("output.footer")]),s._v("，如果说"),a("code",[s._v("banner")]),s._v("和"),a("code",[s._v("footer")]),s._v("是在文件开始和结尾添加字符串，那么"),a("code",[s._v("intro")]),s._v("和"),a("code",[s._v("outro")]),s._v("就是在被打包的代码开头和结尾添加字符串了。")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...,")]),s._v("\n  outro"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      footer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/* follow me on Github! */"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"output-sourcemap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-sourcemap"}},[s._v("#")]),s._v(" output.sourcemap")]),s._v(" "),a("p",[a("code",[s._v("sourcemap")]),s._v("、"),a("code",[s._v("rollup -m,--sourcemap, --no-sourcemap")]),s._v("，如果"),a("code",[s._v("true")]),s._v("，将创建一个单独的"),a("code",[s._v("sourcemap")]),s._v("文件，如果"),a("code",[s._v("inline, sourcemap")]),s._v("将作为数据"),a("code",[s._v("URI")]),s._v("附加到生成的"),a("code",[s._v("output")]),s._v("文件中。")]),s._v(" "),a("h3",{attrs:{id:"output-sourcemapfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-sourcemapfile"}},[s._v("#")]),s._v(" output.sourcemapFile")]),s._v(" "),a("p",[s._v("生成的包的位置，如果这是一个绝对路径，"),a("code",[s._v("sourcemap")]),s._v("中的所有源代码路径都将相对于它，"),a("code",[s._v("map.file")]),s._v("属性是"),a("code",[s._v("sourcemapFile")]),s._v("的基本名称"),a("code",[s._v("basename")]),s._v("，因为"),a("code",[s._v("sourcemap")]),s._v("的位置被假定为与"),a("code",[s._v("bundle")]),s._v("相邻，如果指定"),a("code",[s._v("output")]),s._v("，"),a("code",[s._v("sourcemapFile")]),s._v("不是必需的，在这种情况下，将通过给"),a("code",[s._v("bundle")]),s._v("输出文件添加"),a("code",[s._v(".map")]),s._v("后缀来推断输出文件名，一般应用场景很少，在特殊场景需要改变"),a("code",[s._v("sourcemap")]),s._v("的指向文件地址时才会用到。")]),s._v(" "),a("h3",{attrs:{id:"output-interop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-interop"}},[s._v("#")]),s._v(" output.interop")]),s._v(" "),a("p",[s._v("是否添加"),a("code",[s._v("interop")]),s._v("块，默认情况下"),a("code",[s._v("interop: true")]),s._v("，为了安全起见，如果需要区分默认和命名导出，则"),a("code",[s._v("rollup")]),s._v("会将任何外部依赖项"),a("code",[s._v("default")]),s._v("导出到一个单独的变量，这通常只适用于您的外部依赖关系，例如与"),a("code",[s._v("Babel")]),s._v("，如果确定不需要它，则可以使用"),a("code",[s._v("interop: false")]),s._v("来节省几个字节。")]),s._v(" "),a("h3",{attrs:{id:"output-exports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-exports"}},[s._v("#")]),s._v(" output.exports")]),s._v(" "),a("p",[s._v("使用什么导出模式，默认为"),a("code",[s._v("auto")]),s._v("，它根据"),a("code",[s._v("entry")]),s._v("模块导出的内容猜测你的意图。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("default")]),s._v(": 如果使用"),a("code",[s._v("export default...")]),s._v("仅仅导出一个文件，那适合用这个。")]),s._v(" "),a("li",[a("code",[s._v("named")]),s._v(": 如果导出多个文件，适合用这个。")]),s._v(" "),a("li",[a("code",[s._v("none")]),s._v(": 如果不导出任何内容，例如正在构建应用程序，而不是库，则适合用这个。")])]),s._v(" "),a("h3",{attrs:{id:"output-amd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-amd"}},[s._v("#")]),s._v(" output.amd")]),s._v(" "),a("p",[s._v("打包"),a("code",[s._v("amd")]),s._v("模块相关定义。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("amd.id")]),s._v(": 用于"),a("code",[s._v("AMD/UMD")]),s._v("软件包的"),a("code",[s._v("ID")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("amd.define")]),s._v(": 要使用的函数名称，而不是"),a("code",[s._v("define")]),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"output-indent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-indent"}},[s._v("#")]),s._v(" output.indent")]),s._v(" "),a("p",[s._v("是要使用的缩进字符串，对于需要缩进代码的格式"),a("code",[s._v("amd")]),s._v("、"),a("code",[s._v("iife")]),s._v("、"),a("code",[s._v("umd")]),s._v("，也可以是"),a("code",[s._v("false")]),s._v("无缩进或"),a("code",[s._v("true")]),s._v("默认自动缩进。")]),s._v(" "),a("h3",{attrs:{id:"output-strict"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-strict"}},[s._v("#")]),s._v(" output.strict")]),s._v(" "),a("p",[a("code",[s._v("true")]),s._v("或"),a("code",[s._v("false")]),s._v("，默认为"),a("code",[s._v("true")]),s._v("，是否在生成的非"),a("code",[s._v("ES6")]),s._v("软件包的顶部包含"),a("code",[s._v("usestrict pragma")]),s._v("，严格来说"),a("code",[s._v("ES6")]),s._v("模块始终都是严格模式，所以应该没有很好的理由来禁用它。")]),s._v(" "),a("h2",{attrs:{id:"每日一题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#每日一题"}},[s._v("#")]),s._v(" 每日一题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://github.com/WindrunnerMax/EveryDay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://www.rollupjs.com/\nhttps://segmentfault.com/a/1190000010628352\nhttps://github.com/JohnApache/rollup-usage-doc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);